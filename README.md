# 商品库存管理系统

基于C++实现的命令行交互式库存管理系统，提供商品信息管理、品牌关联、缓存加速、模糊查询、进销存统计等功能。

## 功能特性

### 核心功能
- 商品信息CRUD（创建、读取、更新、删除）
- 多品牌库存关联管理（最多10个品牌）
- LRU缓存加速高频查询
- 操作日志持久化存储
- 编辑距离实现模糊查询

### 高级功能
- 进/出库操作记录追踪
- 自动生成统计报表(export_list.txt/import_list.txt)
- CSV数据导入导出
- 跨平台时间处理支持
- 输入验证与错误处理

### 性能优化
- 双哈希表缓存结构（code/name双索引）
- 内存索引加速查询
- 批量操作日志合并写入
- 智能缓存淘汰机制

## 项目结构

```
.
├── include/ # 头文件
│ ├── cache.h # LRU缓存实现
│ ├── datatype.h # 数据结构定义
│ ├── engine.h # 核心业务逻辑
│ ├── index.h # 模糊查询索引
│ ├── logic.h # 菜单交互逻辑
│ ├── persister.h # 持久化模块
│ ├── storage.h # 文件存储管理
│ └── ui.h # 用户界面组件
├── src/ # 实现文件
│ ├── cache.cpp # 缓存策略实现
│ ├── datatype.cpp # CSV解析/序列化
│ ├── engine.cpp # 查询引擎实现
│ ├── index.cpp # 编辑距离算法
│ ├── logic.cpp # 菜单流程控制
│ ├── persister.cpp # 日志重放逻辑
│ ├── storage.cpp # 文件IO操作
│ ├── ui.cpp # 输入输出处理
│ └── main.cpp # 程序入口
```

## 编译运行

```bash
# 使用G++编译
g++ -std=c++11 src/*.cpp -o inventory_system

# 运行程序
./inventory_system
```

## 使用说明

### 主菜单导航
```
主菜单:
1: 添加商品品种
2: 显示商品品种
3: 查询商品
4: 删除商品
5: 商品出库
6: 商品进库
0: 退出
```

### 典型操作流程

1. **添加商品**
- 输入商品名称、编码、颜色
- 逐个添加关联品牌（名称/编码/库存/价格）

2. **库存管理**
- 出库/入库时选择商品
- 更新具体品牌库存数量
- 自动计算总库存变化

3. **报表生成**
- 退出时自动生成：
- export_list.txt 出货统计
- import_list.txt 进货统计

4. **高级查询**
- 支持编码精确查询
- 支持商品级库存修改

## 技术实现

### 核心算法
- **LRU缓存**：双向链表+哈希表 O(1)复杂度
- **编辑距离**：动态规划实现模糊匹配
- **日志重放**：WAL(Write-Ahead Logging)机制
- **索引构建**：名称-编码反向映射

## 注意事项

1. 数据文件默认存储为：
- 主数据文件：data.csv
- 操作日志文件：operation.log

2. 缓存策略：
- 默认最大缓存条目：10
- 最近最少使用淘汰策略

3. 输入限制：
- 商品编码需≥0
- 品牌数量≤10
- 库存值不可为负

4. 跨平台支持：
- 兼容Windows/Linux时间处理
- 统一使用UTF-8编码